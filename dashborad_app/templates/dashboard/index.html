{% load static %}

<div class="container">
    <h1 class="text-center">Tableau de bord</h1>
    <div class="d-flex ">
        <div class=" text-center col-2 me-3">
            <button class="btn btn-primary switch-chart" data-chart="prospectsByDay">Prospects par Jour</button>
            <button class="btn btn-secondary switch-chart" data-chart="clientsByMonthChart">Prospet par Mois</button>
            <button class="btn btn-secondary switch-chart" data-chart="agentsComparisonChart">Clients Gagnés Par Agent</button>
            <button class="btn btn-secondary switch-chart" data-chart="prospectsBySourceChart">Répartition des Prospects</button>
            <button class="btn btn-secondary switch-chart" data-chart="lostProspectsBySourceChart">Prospects Perdus Par Agent</button>
            <button class="btn btn-secondary switch-chart" data-chart="topPerformingAgentsChart">Prospet Perdus par Source</button>
            <button class="btn btn-secondary switch-chart" data-chart="totalLeadsChart">Total Prospects par Jour</button>
        </div>
        <!-- Single Canvas for All Charts -->
        <div class="card mb-2 ">
            <div class="card-body">
                <canvas id="dynamicChartCanvas" width="400" height="200"></canvas>
            </div>
        </div>
    </div>
</div>


<script>
    // Données pour les graphiques
    const prospectsBySourceLables = JSON.parse('{{ prospects_by_source_labels|safe }}');
    const prospectsBySourceData = JSON.parse('{{ prospects_by_source_data|safe }}');
    const agentsComparisonLabels =JSON.parse(' {{ agents_comparison_labels|safe }}');
    const agentsComparisonData =JSON.parse(' {{ agents_comparison_data|safe }}');
    const agentsComparisonLeadLostData =JSON.parse(' {{ agents_comparison_pr_lost_dt|safe }}');
    const leadsByMonthlabel = JSON.parse('{{ get_leads_by_month_labels|safe }}');
    const leadsByMonthData = JSON.parse('{{ get_leads_by_month_data|safe }}');
    const lostProspectsByAgentLabel = JSON.parse('{{ lost_prospects_by_agent_labels|safe }}');
    const lostProspectsByAgentData = JSON.parse('{{ lost_prospects_by_agent_data|safe }}');
    const lostLeadBySourceLabel =JSON.parse(' {{ lost_lead_by_source_labels|safe }}');
    const lostLeadBySourceData =JSON.parse(' {{ lost_lead_by_source_data|safe }}');

    const totalLeadsLabels = JSON.parse('{{ total_leads_labels|safe }}');
    const totalLeadsData = JSON.parse('{{ total_leads_data|safe }}');
</script>

<script>
    const chartLabels = JSON.parse('{{ dashboard_labels|safe }}');
    const chartData = JSON.parse('{{ dashboard_data|safe }}');
</script>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{% static 'scripts/prospects_by_day_chart.js' %}" async></script>
